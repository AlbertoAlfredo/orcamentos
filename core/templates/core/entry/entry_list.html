{% extends 'base.html' %}

{% block title %}
	<title>Entradas</title>
{% endblock title %}

{% block content %}

    <form class="navbar-form navbar-right" action="." method="get">
        <!-- add -->
        <a href="{% url 'entry_add' %}">
            <button id="new_entry" type="button" class="btn btn-primary">
                <span class="glyphicon glyphicon-plus"></span> Adicionar
            </button>
        </a>
        <!-- search form -->
        <div class="form-group">
	        <input id="search_box" name="search_box" type="text" placeholder="Localizar..." class="form-control">
	        <button type="submit" class="btn btn-success form-control"><span class="glyphicon glyphicon-search"></span></button>
	    </div>
	</form>
	
	{% if count == entrys.count %}
		<h2><i class="fa fa-inbox"></i> Lista de Entradas <small><a href="{% url 'entry_list' %}">Todos</a></small></h2>
	{% else %}
		<h2><i class="fa fa-inbox"></i> Lista de Entradas </h2>
	{% endif %}

	<div>
		{% if entrys %}
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Obra</th>
						<th>Cliente</th>
						<th>Vendedor</th>
						<th>Prioridade</th>
						<th>Categoria</th>
						<th>Descrição</th>
						<th>Entrada em</th>
					</tr>
				</thead>
				<tbody>
				{% for entry in entrys %}
					<tr>
					<td><a href="{{ entry.get_absolute_url }}">{{ entry.work }}</a></td>
						<td>{{ entry.work.customer }}</td>
						<td>{{ entry.seller.employee.user.first_name }}</td>
						<td>{{ entry.get_priority_display }}</td>
						<td>{{ entry.category }}</td>
						<td>{{ entry.description }}</td>
						<td>{{ entry.created|date:"d/m/Y" }}</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		{% else %}
			<p class="alert alert-warning">Sem itens na lista.</p>
		{% endif %}
	</div>

    <hr>
	<div>
		{% if count > 0 %}
			<h3><b>Total:</b> {{ count }}
				{% if count == 1 %}
					entrada
				{% elif count > 1 %}
					entradas
				{% endif %}
			</h3>
		{% endif %}
	</div>

<!-- pagination -->
{% include "pagination.html" %}

{% endblock content %}